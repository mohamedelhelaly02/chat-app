<div class="chat-area">
    @if (!selectedChatMessages()) {
    <div class="empty-state">
        <svg width="120" height="120" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" />
        </svg>
        <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ! ğŸ‘‹</h2>
        <p>Ø§Ø®ØªØ± Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ø¨Ø¯Ø¡</p>
    </div>
    }

    @else if (isLoadingMessages()) {
    <div class="loading-state">
        <div class="spinner"></div>
        <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„...</p>
    </div>
    }

    @else if (messagesError()) {
    <div class="error-state">
        <svg width="80" height="80" viewBox="0 0 24 24" fill="currentColor">
            <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
        </svg>
        <p class="error">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</p>
        <p>{{ messagesError() }}</p>
    </div>
    }
    @else {
    <div class="chat-header">
        <img [src]="selectedUserChat()?.avatar" alt="Avatar">
        <div>
            <h3>{{ selectedUserChat()?.username }}</h3>
            <span class="status">
                {{ selectedUserChat()?.online ? 'Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†' : 'ØºÙŠØ± Ù…ØªØµÙ„' }}
            </span>
        </div>
    </div>

    <div class="messages-container">
        <div class="messages-list">
            @for (message of selectedChatMessages(); track message._id) {
            <app-user-message [message]="message"></app-user-message>
            }
        </div>

        <!-- Typing Indicator -->
        <!-- @if (isTyping()) {
        <div class="typing-indicator">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
        </div>
        } -->
    </div>

    <app-message-input [selectedUserId]="selectedUserId()">
    </app-message-input>

    }
</div>